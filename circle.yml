---
machine:
  environment:
    BEET_HOME: /beetbox
    BEET_USER: ubuntu
    BEET_DEPENDENCIES: https://raw.githubusercontent.com/beetboxvm/beetbox/master/provisioning/beetbox.sh
    BEET_PROVISION: provisioning/beetbox.sh
dependencies:
  pre:
    - curl -fsSL $BEET_DEPENDENCIES | bash
    - sudo cp -rf ~/$CIRCLE_PROJECT_REPONAME/* $BEET_HOME/provisioning/ansible/roles/${CIRCLE_PROJECT_REPONAME/ansible-role-beetbox-/beetboxvm.}
    - sudo cp ~/$CIRCLE_PROJECT_REPONAME/tests/config.yml ~/vagrant.config.yml
test:
  override:
    - $BEET_HOME/$BEET_PROVISION
